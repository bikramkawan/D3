<!DOCTYPE html>
<meta charset="utf-8">
<style>

    .a text {
        font: 10px sans-serif;
        text-anchor: middle;
    }

    .a path {
        stroke: #fff;
    }

</style>
<body>
<script src="d3.js"></script>
<script>


    d3.json('spawncircle/data/data.json',function (jsondata) {
 var jsondata = jsondata;

var data=[];
        jsondata.forEach(function (d) {
          data.push(d.data_type);
        })


    var width = 960,
            height = 560,
            o_radius = 50;
    radiusincrease = 100;


    var svg = d3.select("body").append("svg")
            .attr("width", width)
            .attr("height", height)
            .append("g")
            .attr('class', 'main')
            .attr("transform", "translate(" + width / 3 + "," + height / 2 + ")")


    a_data = ['E1', 'E2', 'E3', 'E4', 'E5', 'E6', 'E7', 'E8', 'E9', 'E10', 'E11', 'E12'];


    a_color = ['green', 'green', 'green', 'red', 'red', 'khaki', 'black', 'black', 'khaki', 'blue', 'blue', 'khaki'];


    var origin = svg.append("circle").attr({
        cx: 0,
        cy: 0,
        r: o_radius,
        fill: "none",
        stroke: "blue"
    });

  var svgmain = function (radius, callback) {
        var svg = d3.selectAll('g.main').append('g').attr('class', 'main');


        callback(svg);
    }

    var mainElements = function (svg, nodes, elementRadius) {
        element = svg.selectAll('g.main')
                .data(nodes)
                .enter()

                .append('text')
                .attr('r', elementRadius)
                .attr('x', function (d, i) {

                    return d.x;
                })
                .attr('y', function (d, i) {
                    return d.y;
                })
                .attr("font-size","14px")
                .attr('stroke', 'red')
                .attr('fill', 'none')
                .text(function (d, i) {
                    console.log(d)
                    return d.text;
                });

//
//        svg.selectAll('g.main')
//                .data(nodes)
//                .enter().append('svg:circle')
//                .attr('r', elementRadius)
//                .attr('cx', function (d, i) {
//                    return d.x;
//                })
//                .attr('cy', function (d, i) {
//                    return d.y;
//                })
//                .attr('stroke', 'purple')
//                .attr('fill', 'none');

        svg.selectAll('g.main')
                .data(["main"])
                .enter().append('svg:circle')

                .attr({
                    cx: 0,
                    cy: 0,
                    r: o_radius + radiusincrease,
                    fill: "none",
                    stroke: "green"
                });


    }

    var mainnodes = function (numNodes, radius, catdata) {
        var nodes = [],
                text,
                color,
                angle, degtorad,
                x,
                y, degree,

                i;
        for (i = 0; i < numNodes; i++) {
            angle = (2 * Math.PI / numNodes) * i; // Calculate the angle at which the element will be placed.
            //angle = (i * 2* Math.PI/numNodes); // Calculate the angle at which the element will be placed.
            // For a semicircle, we would use (i / numNodes) * Math.PI.
            x = (radius * Math.cos(angle)); // Calculate the x position of the element.
            y = (radius * Math.sin(angle)); // Calculate the y position of the element.

            text = catdata[i];

            nodes.push({'id': i, 'x': x, 'y': y, 'text': text, 'color': color});

        }

        return nodes;

    }

var nodes;
    var maindraw = function () {
        var numNodes = data.length;
        var radius = o_radius + radiusincrease;
        var catdata = data;
         nodes = mainnodes(numNodes, radius, catdata);

        svgmain(radius, function (svg) {
            mainElements(svg, nodes, 25);
        });
    }
maindraw();


    var level1 = function (radius, callback) {
        var svg = d3.selectAll('g.main').append('g').attr('class', 'cat2');

        callback(svg);
    }

 var level1elements = function (svg, nodes, elementRadius) {
        element = svg.selectAll('g.main')
                .data(nodes)
                .enter()

                .append('text')
                .attr('r', elementRadius)
                .attr('x', function (d, i) {

                    return d.x;
                })
                .attr('y', function (d, i) {
                    return d.y;
                })

                .attr('stroke', function (d) {
                    return d.color;
                })
                .attr('fill', 'none')
                .text(function (d, i) {
                    return d.text;
                });

        svg.selectAll('g.main')
                .data(nodes)
                .enter().
                append(('circle'))
                .attr('r', function(d,i){ return ((i > 4 && i < 6) )?(elementRadius*2.6):elementRadius;})
                .attr('data-index',function (d,i) { return i;

                })
                .attr('cx', function (d, i) {
                    return d.x;
                })
                .attr('cy', function (d, i) {
                    return d.y;
                })
                .attr('stroke', 'black')
                .attr('transform',function (d,i) {
                   return ((i > 4 && i < 6) )? 'rotate(45)':'rotate(0)';})
                .attr('fill', 'none');

        svg.selectAll('g.main')
                .data(["main"])
                .enter().append('svg:circle')

                .attr({
                    cx: 0,
                    cy: 0,
                    r: o_radius + radiusincrease,
                    fill: "none",
                    stroke: "green"
                });


    }
var level1nodes = function (numNodes, radius, catdata, catcolor) {
        var nodes = [],
                text,
                color,
                angle, degtorad,
                x,
                y, degree,

                i;
        for (i = 0; i < numNodes; i++) {
            angle = (2 * Math.PI / numNodes) * i; // Calculate the angle at which the element will be placed.
            //angle = (i * 2* Math.PI/numNodes); // Calculate the angle at which the element will be placed.
            // For a semicircle, we would use (i / numNodes) * Math.PI.
            x = (radius * Math.cos(angle)); // Calculate the x position of the element.
            y = (radius * Math.sin(angle)); // Calculate the y position of the element.

            text = catdata[i];

            nodes.push({'id': i, 'x': x, 'y': y, 'text': text, 'color': color});
        }

        return nodes;
    }



    var level1draw = function () {
        var numNodes = data.length;
        var radius = o_radius + radiusincrease;
        var catdata = data;
        var nodes1 = level1nodes(numNodes, radius, catdata);
        svgmain(radius, function (svg) {
            level1elements(svg, nodes1, 30);
        });
    }
level1draw();






  })
</script>