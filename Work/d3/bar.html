<!DOCTYPE html>

<style>

    .node {
        cursor: pointer;
    }

    .node circle {
        stroke: #7CBB00;
        stroke-width: 4px;
    }

    .node text {
        font: 15px monospace, sans-serif;
        fill: #f0f0f0;
        stroke: #f0f0f0;
    }

    .link {
        fill: none;
        stroke: #7CBB00;
        stroke-width: 4px;
    }

    body {
        margin: 15px;
        background-color: black;
        font-family: 'Fira Sans', sans-serif;
    }

    .bar {
        fill: #6F257F;
    }

    .bar:hover {
        fill: #CC0058;
        transition: fill 0.15s;
    }

    text {
        font-family: 'Fira Sans', sans-serif;
        font-weight: 500;
        font-size: 15px;
        color: #081F2C;
    }

    .axis path,
    .axis line {
        fill: none;
        stroke: #BDC2C6;
        stroke-width: 1px;
        shape-rendering: crispEdges;
    }

    .x path {
        display: none;
    }

    .y line {
        display: none;
    }

    .newToolTip {
        position: absolute;
        text-align: center;
        width: 200px;
        height: 58px;
        padding: 2px;
        font: 15px sans-serif;
        background: lightsteelblue;
        border: 0px;
        border-radius: 8px;
        pointer-events: none;
    }

    .toolTip:after {
        content: "";
        width: 0;
        height: 0;
        border-left: 12px solid transparent;
        border-right: 12px solid transparent;
        border-top: 12px solid white;
        position: absolute;
        bottom: -10px;
        left: 50%;
        margin-left: -12px;
    }

    .toolTip span {
        font-weight: 500;
        color: #081F2C;
    }

    #tooltip {
        opacity: 0;
        position: absolute;
        text-align: center;
        width: 60px;
        height: 40px;
        background: white;
        border: 0px;
    }

</style>

<html>


<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=1080, user-scalable=no">

    <title>Cinematic Universe</title>

    <!-- Required stylesheet -->
    <link rel="stylesheet" media="screen" href="core/deck.core.css">

    <!-- Extension CSS files go here. Remove or add as needed. -->
    <link rel="stylesheet" media="screen" href="extensions/goto/deck.goto.css">
    <link rel="stylesheet" media="screen" href="extensions/menu/deck.menu.css">
    <link rel="stylesheet" media="screen" href="extensions/navigation/deck.navigation.css">
    <link rel="stylesheet" media="screen" href="extensions/status/deck.status.css">
    <link rel="stylesheet" media="screen" href="extensions/scale/deck.scale.css">

    <!-- Style theme. More available in /themes/style/ or create your own. -->
    <link rel="stylesheet" media="screen" href="themes/style/neon.css">

    <!-- Transition theme. More available in /themes/transition/ or create your own. -->
    <link rel="stylesheet" media="screen" href="themes/transition/horizontal-slide.css">

    <!-- Basic black and white print styles -->
    <link rel="stylesheet" media="print" href="core/print.css">

    <!-- Required Modernizr file -->
    <script src="modernizr.custom.js"></script>
</head>
<body>


<div class="deck-container">

    <!-- Begin slides. Just make elements with a class of slide. -->

    <section class="slide">

        <h2 align="center">Marvel Cinematic Universe Intro</h2>
        <p>The name Marvel Cinematic Universe is a very powerful American media franchise outlet that consist of very
            successful mainstream superhero films that is owned by Walt Disney. The universe consist of numerous
            superheroes published by Marvel comics. The brand itself is worth teens to hundreds of BILLION dollars with
            a B. The franchise has expanded to television series, new comic books as promotional materials, short films,
            and digital series. However, my project is to only focus on the films from the cinematic universes. Since
            Marvel was able to introduce superhero films to mainstream audiences, it is no longer a small market of
            fanboys/fangirls but films that the entire family could enjoy. Marvel/Disney have perfected their formula
            for these type of films. They did so well that majority of their films topped box offices for weeks.
            Worlwide gross box offices sometimes raked up to the billions for just a single film.</p>

        <h2 align="center">D.C. Extended Universe Intro</h2>
        <p>D.C. Extended Universe is another American media franchise outlet that consist of numerous superheroes
            published not by Marvel comics but by DC Comics usually distributed by Warner Brother Studios. We can argue
            based on fandom but the box office scores can tell you that the DCEU had a very rough run with their
            cinematic universe. Their targeted audiences in the beginning were not mainstream viewers but were more
            toward fanboys of the series. The competition between Marvel and DC is relateable to the competition of Coke
            and Pepsi. Some folks prefer Cokes over Pepsi and vice versa. However to take a neutral position and to
            justify for the universe, DCEU has started much later than the MCU with their first film that aired on
            theatres in 2013 while for Marvel was 2008. Since the DCEU has not been as successful at the box office and
            at reaching mainstream movie-goers as Marvel, the franchise has only grossed about $3 billion dollars
            worldwide. However, the quality of their films have been improving throughout the years which their most
            recent film Wonder Woman (2017) has recieved very high acclaim. The Cinematic Universes does not contain
            Batman Forever and the The Dark Knight films because those films do not belong to this cinematic universe.
            They were separate entities to be fair. Even though Christopher Nolan's The Dark Knight Triology was one of
            my most favorite trilogies of all time.</p>

        <h3 align="center">Some info on the Vizzie</h3>
        <p>This narrative visualization is a hybrid that follows the slide show and capability to drill-down to the
            cinematic universes on the third slide as well as some upcoming movies from the Cinematic Universes. The
            second slide only contain box offices of movies that have been released worldwide hence the global box
            office total. To navigate, simply click on the arrows on the each side of the pages or use the arrow keys on
            your keyboard. This visualization is best view with a 1080P resolution on Google Chrome. I have not tested
            this on Internet Explorer therefore it is not recommended.</p>

    </section>

    <section class="slide">

        <div id="barchart"></div>

    </section>

    <section class="slide">
        <h3>The Onion Diagram</h3>
        <p2>1.) Blank nodes are not expandable</p2>
        </br>
        <p2>2.) Click on the gray nodes to expand</p2>
        </br>
        <p2>3.) Click the nodes again to collapse</p2>
        </br>
        <p2>4.) Best view on 1080P resolution</p2>
        </br>

        <div id="onion"></div>

    </section>

    <section class="slide">
        <h3>Rubric</h3>
        <p2>This narrative visualization is a hybrid that follows the slide show and capability to drill-down to the
            cinematic universes on the third slide. Each slide represents a scene, there are a total of four scenes
            within this narrative visualization. Annotations are part of slide #2 where if your mouse is hover over the
            bar charts you can see the details. Parameters are available as color variations for example on slide #3 the
            nodes that are expandable are in gray color and the blank nodes are not expandable. Triggers are navigation
            menus, simply click on the arrows on the each side of the pages or use the arrow keys on your keyboard to
            navigate to next or prior pages. This visualization is best view with a 1080P resolution on Google Chrome. I
            have not tested this on Internet Explorer therefore it is not recommended.
        </p2>
        <h3>Sources</h3>
        <p2>Marvel Cinematic Universe - <a href="https://en.wikipedia.org/wiki/Marvel_Cinematic_Universe">https://en.wikipedia.org/wiki/Marvel_Cinematic_Universe</a>
        </p2>
        </br>
        <p2>DC Extended Universe - <a href="https://en.wikipedia.org/wiki/DC_Extended_Universe">https://en.wikipedia.org/wiki/DC_Extended_Universe</a>
        </p2>
        </br>
        <p2>Dataset for charts - <a href="https://en.wikipedia.org/wiki/List_of_American_superhero_films">https://en.wikipedia.org/wiki/List_of_American_superhero_films</a>
        </p2>
        </br>
        <p2>Interactive d3.js tree diagram - <a href="http://bl.ocks.org/d3noob/8375092">http://bl.ocks.org/d3noob/8375092</a>
        </p2>
        </br>
        <p2>imakewebthings deck.js with neon theme - <a href="https://github.com/imakewebthings/deck.js">
            https://github.com/imakewebthings/deck.js</a></p2>
        </br>
        <p2></p2>
        <p2></p2>
        <p2></p2>
        <p2></p2>
    </section>

    <!-- End slides. -->

    <!-- Begin extension snippets. Add or remove as needed. -->

    <!-- deck.navigation snippet -->
    <div aria-role="navigation">
        <a href="#" class="deck-prev-link" title="Previous">&#8592;</a>
        <a href="#" class="deck-next-link" title="Next">&#8594;</a>
    </div>

    <!-- deck.status snippet -->
    <p class="deck-status" aria-role="status">
        <span class="deck-status-current"></span>
        /
        <span class="deck-status-total"></span>
    </p>

    <!-- deck.goto snippet -->
    <form action="." method="get" class="goto-form">
        <label for="goto-slide">Go to slide:</label>
        <input type="text" name="slidenum" id="goto-slide" list="goto-datalist">
        <datalist id="goto-datalist"></datalist>
        <input type="submit" value="Go">
    </form>

    <!-- End extension snippets. -->
</div>

<!-- Required JS files. -->
<script src="jquery.min.js"></script>
<script src="core/deck.core.js"></script>

<!-- Extension JS files. Add or remove as needed. -->
<script src="extensions/menu/deck.menu.js"></script>
<script src="extensions/goto/deck.goto.js"></script>
<script src="extensions/status/deck.status.js"></script>
<script src="extensions/navigation/deck.navigation.js"></script>
<script src="extensions/scale/deck.scale.js"></script>
<script src="https://d3js.org/d3.v4.min.js"></script>

<!-- Initialize the deck. You can put this in an external file if desired. -->
<script>
    $(function () {
        $.deck('.slide');
    });

</script>

<!--
   // Slide #3 This populates the onion diagram for drill down
//-->

<script src="https://d3js.org/d3.v4.min.js"></script>

<script>

    //for future references this will be very cool if I can add superhero icons for each node
    var movieData =
    {
        "name": "Cinematic Universes",
        "children": [
            {
                "name": "DC Extended Universe",
                "children": [

                    {"name": "Black Adam"},
                    {
                        "name": "Justice League", "children": [
                        {"name": "Aquaman"},
                        {
                            "name": "Batman", "children": [
                            {"name": "Batgirl"},
                            {"name": "Batman v Superman: Dawn of Justice"},
                            {"name": "Gotham City Sirens"},
                            {"name": "The Batman"},
                        ]
                        },
                        {"name": "Cyborg"},
                        {"name": "Flashpoint"},
                        {"name": "Green Lantern Corps"},
                        {
                            "name": "Justice League", "children": [
                            {"name": "Justice League"},
                            {"name": "Justice League 2"},
                            {"name": "Justice League Dark"},
                        ]
                        },
                        {
                            "name": "Superman", "children": [
                            {"name": "Man of Steel"},
                            {"name": "Man of Steel 2"},
                            {"name": "Batman v Superman: Dawn of Justice"},
                        ]
                        },
                        {
                            "name": "Wonder Woman", "children": [
                            {"name": "Wonder Woman"},
                            {"name": "Wonder Woman 2"},
                            {"name": "Batman v Superman: Dawn of Justice"},
                        ]
                        },
                    ]
                    },
                    {"name": "Lobo"},
                    {"name": "Nightwing"},
                    {"name": "Shazam"},
                    {
                        "name": "Suicide Squad", "children": [
                        {"name": "Suicide Squad"},
                        {"name": "Suicide Squad 2"},
                        {"name": "Deadshot"},
                    ]
                    },
                ]
            },
            {
                "name": "Marvel Cinematic Universe",
                "children": [
                    {
                        "name": "Doctor Strange", "children": [
                        {"name": "Doctor Strange"},
                        {"name": "Doctor Strange 2"},
                    ]
                    },
                    {
                        "name": "Guardians of the Galaxy", "children": [
                        {"name": "Guardians of the Galaxy"},
                        {"name": "Guardians of the Galaxy Vol. 2"},
                        {"name": "Guardians of The Galaxy Vol. 3"},
                    ]
                    },
                    {"name": "Kraven The Hunter"},
                    {"name": "Namor"},
                    {"name": "Silver and Black"},
                    {
                        "name": "The Avengers", "children": [
                        {
                            "name": "Ant-Man", "children": [
                            {"name": "Ant-Man"},
                            {"name": "Ant-Man and the Wasp"},
                        ]
                        },
                        {"name": "Black Panther"},
                        {"name": "Black Widow"},
                        {
                            "name": "Captain America", "children": [
                            {"name": "Captain America: The First Avenger"},
                            {"name": "Captain America: The Winter Soldier"},
                            {"name": "Captain America: Civil War"},
                        ]
                        },
                        {"name": "Captain Marvel"},
                        {
                            "name": "Iron Man", "children": [
                            {"name": "Iron Man"},
                            {"name": "Iron Man 2"},
                            {"name": "Iron Man 3"},
                        ]
                        },
                        {
                            "name": "Spider-Man", "children": [
                            {"name": "Spider-Man: Homecoming"},
                            {"name": "Untitled Spider-Man Sequel"},
                        ]
                        },
                        {
                            "name": "The Avengers", "children": [
                            {"name": "The Avengers"},
                            {"name": "Avengers: Age of Ultron"},
                            {"name": "Avengers: Infinity War"},
                            {"name": "Untitled Avengers film"},
                        ]
                        },
                        {"name": "The Incredible Hulk"},
                        {
                            "name": "Thor", "children": [
                            {"name": "Thor"},
                            {"name": "Thor: The Dark World"},
                            {"name": "Thor: Ragnarok"},
                        ]
                        },
                    ]
                    },
                    {"name": "Venom"},

                ]
            },
        ]
    };

    //this part of the code is based on interactive d3.js tree diagram from d3noob http://bl.ocks.org/d3noob/8375092 with some custom modifications to fit this interactive visualization

    // Set the dimensions and margins of the diagram
    var margin = {top: 20, right: 250, bottom: 30, left: 250},
            width = 2000 - margin.left - margin.right,
            height = 1000 - margin.top - margin.bottom;

    // append the svg object to the body of the page
    // appends a 'group' element to 'svg'
    // moves the 'group' element to the top left margin
    var svg = d3.select("#onion").append("svg")
            .attr("width", width + margin.right + margin.left)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform", "translate("
                    + margin.left + "," + margin.top + ")");


    var i = 0,
            duration = 750,
            root;

    // declares a tree layout and assigns the size
    var treemap = d3.tree().size([height, width]);

    // Assigns parent, children, height, depth
    root = d3.hierarchy(movieData, function (d) {
        return d.children;
    });
    root.x0 = height / 2;
    root.y0 = 0;

    // Collapse after the second level
    root.children.forEach(collapse);

    update(root);

    // Collapse the node and all it's children
    function collapse(d) {
        if (d.children) {
            d._children = d.children
            d._children.forEach(collapse)
            d.children = null
        }
    }

    function update(source) {

        // Assigns the x and y position for the nodes
        var movieData = treemap(root);

        // Compute the new tree layout.
        var nodes = movieData.descendants(),
                links = movieData.descendants().slice(1);

        // Normalize for fixed-depth.
        nodes.forEach(function (d) {
            d.y = d.depth * 180
        });

        // ****************** Nodes section ***************************

        // Update the nodes...
        var node = svg.selectAll('g.node')
                .data(nodes, function (d) {
                    return d.id || (d.id = ++i);
                });

        // Enter any new modes at the parent's previous position.
        var nodeEnter = node.enter().append('g')
                .attr('class', 'node')
                .attr("transform", function (d) {
                    return "translate(" + source.y0 + "," + source.x0 + ")";
                })
                .on('click', click);

        // Add Circle for the nodes
        nodeEnter.append('circle')
                .attr('class', 'node')
                .attr('r', 1e-6)
                .style("fill", function (d) {
                    return d._children ? "lightsteelblue" : "#fff";
                });

        // Add labels for the nodes
        nodeEnter.append('text')
                .attr("dy", ".35em")
                .attr("x", function (d) {
                    return d.children || d._children ? -13 : 13;
                })
                .attr("text-anchor", function (d) {
                    return d.children || d._children ? "end" : "start";
                })
                .text(function (d) {
                    return d.data.name;
                });

        // UPDATE
        var nodeUpdate = nodeEnter.merge(node);

        // Transition to the proper position for the node
        nodeUpdate.transition()
                .duration(duration)
                .attr("transform", function (d) {
                    return "translate(" + d.y + "," + d.x + ")";
                });

        // Update the node attributes and style
        nodeUpdate.select('circle.node')
                .attr('r', 10)
                .style("fill", function (d) {
                    return d._children ? "lightsteelblue" : "#fff";
                })
                .attr('cursor', 'pointer');


        // Remove any exiting nodes
        var nodeExit = node.exit().transition()
                .duration(duration)
                .attr("transform", function (d) {
                    return "translate(" + source.y + "," + source.x + ")";
                })
                .remove();

        // On exit reduce the node circles size to 0
        nodeExit.select('circle')
                .attr('r', 1e-6);

        // On exit reduce the opacity of text labels
        nodeExit.select('text')
                .style('fill-opacity', 1e-6);

        // ****************** links section ***************************

        // Update the links...
        var link = svg.selectAll('path.link')
                .data(links, function (d) {
                    return d.id;
                });

        // Enter any new links at the parent's previous position.
        var linkEnter = link.enter().insert('path', "g")
                .attr("class", "link")
                .attr('d', function (d) {
                    var o = {x: source.x0, y: source.y0}
                    return diagonal(o, o)
                });

        // UPDATE
        var linkUpdate = linkEnter.merge(link);

        // Transition back to the parent element position
        linkUpdate.transition()
                .duration(duration)
                .attr('d', function (d) {
                    return diagonal(d, d.parent)
                });

        // Remove any exiting links
        var linkExit = link.exit().transition()
                .duration(duration)
                .attr('d', function (d) {
                    var o = {x: source.x, y: source.y}
                    return diagonal(o, o)
                })
                .remove();

        // Store the old positions for transition.
        nodes.forEach(function (d) {
            d.x0 = d.x;
            d.y0 = d.y;
        });

        // Creates a curved (diagonal) path from parent to the child nodes
        function diagonal(s, d) {

            path = `M ${s.y} ${s.x}
            C ${(s.y + d.y) / 2} ${s.x},
              ${(s.y + d.y) / 2} ${d.x},
              ${d.y} ${d.x}`

            return path
        }

        // Toggle children on click.
        function click(d) {
            if (d.children) {
                d._children = d.children;
                d.children = null;
            } else {
                d.children = d._children;
                d._children = null;
            }
            update(d);
        }
    }


</script>

<!--
   // Slide #2 This populates the bar chart
//-->

<script>
    var data = [{"movie": "The Avengers", "boxoffice": 1519}, {
        "movie": "Avengers: Age of Ultron",
        "boxoffice": 1405
    }, {"movie": "Iron Man 3", "boxoffice": 1215}, {
        "movie": "Captain America: Civil War",
        "boxoffice": 1153
    }, {"movie": "Batman v Superman: Dawn of Justice", "boxoffice": 873}, {
        "movie": "Guardians of the Galaxy Vol. 2",
        "boxoffice": 860
    }, {"movie": "Wonder Woman", "boxoffice": 779}, {
        "movie": "Guardians of the Galaxy",
        "boxoffice": 774
    }, {"movie": "Suicide Squad", "boxoffice": 746}, {
        "movie": "Captain America: The Winter Soldier",
        "boxoffice": 715
    }, {"movie": "Doctor Strange", "boxoffice": 678}, {
        "movie": "Man of Steel",
        "boxoffice": 668
    }, {"movie": "Thor: The Dark World", "boxoffice": 645}, {
        "movie": "Iron Man 2",
        "boxoffice": 624
    }, {"movie": "Iron Man", "boxoffice": 585}, {
        "movie": "Spider-Man: Homecoming",
        "boxoffice": 572
    }, {"movie": "Ant-Man", "boxoffice": 519}, {
        "movie": "Thor",
        "boxoffice": 449
    }, {"movie": "Captain America: The First Avenger", "boxoffice": 371}, {
        "movie": "The Incredible Hulk",
        "boxoffice": 263
    }];

    // set the dimensions and margins of the graph
    var margin2 = {top2: 20, right2: 20, bottom2: 30, left2: 300},
            width2 = 1500 - margin2.left2 - margin2.right2,
            height2 = 750 - margin2.top2 - margin2.bottom2;

    // set the ranges
    var y2 = d3.scaleBand()
            .range([height2, 0])
            .padding(0.1);

    var x2 = d3.scaleLinear()
            .range([0, width2]);

    // append the svg object to the body of the page
    // append a 'group' element to 'svg'
    // moves the 'group' element to the top left margin
    var svg2 = d3.select("#barchart").append("svg")
            .attr("width", width2 + margin2.left2 + margin2.right2)
            .attr("height", height2 + margin2.top2 + margin2.bottom2)
            .append("g")
            .attr("transform",
                    "translate(" + margin2.left2 + "," + margin2.top2 + ")");

    var tooltip = d3.select("#barchart").append("div").attr("class", "toolTip").style("opacity", 0);

    var newToolTip = d3.select("body").append("div")
            .attr("class", "newToolTip")
            .style("opacity", 0);

    var div = d3.select("#barchart").append("div")
            .attr("class", "tooltip")
            .style("opacity", 0);

    // format the data
    data.forEach(function (d) {
        d.boxoffice = +d.boxoffice;
    });

    // Scale the range of the data in the domains
    x2.domain([0, d3.max(data, function (d) {
        return d.boxoffice;
    })])
    y2.domain(data.map(function (d) {
        return d.movie;
    }));
    //y.domain([0, d3.max(data, function(d) { return d.boxoffice; })]);

    // append the rectangles for the bar chart

    var grp = svg2.selectAll("g")
            .data(data)
            .enter().append("g");


    grp.append('rect')
            .attr("class", "bar")
            //.attr("x", function(d) { return x(d.boxoffice); })
            .attr("width", function (d) {
                return x2(d.boxoffice);
            })
            .attr("y", function (d) {
                return y2(d.movie);
            })
            .attr("x", function (d) {
                return 260;
            })
            .attr("height", y2.bandwidth())
            .on("mouseover", function (d) {
                newToolTip.transition()
                        .duration(200)
                        .style("opacity", .9);
                newToolTip.html(`Movie Name : ${d.movie}` + '<br>' + `Boxoffice: ${d.boxoffice}`)
                        .style("left", (d3.event.pageX) + "px")
                        .style("top", (d3.event.pageY - 28) + "px");
            })
            .on("mouseout", function (d) {
                newToolTip.transition()
                        .duration(500)
                        .style("opacity", 0);
            });


    grp.append('text')
            .text(function (d) {
                return (d.movie);
            })
            .attr("x", '0')
            .attr("y", function (d) {
                return y2.bandwidth() / 2 + y2(d.movie);
            }).attr('fill', 'white')

    console.log(data)
    const widthAvailable = 950;
    const yearsToShow = [0, 200, 400, 800, 900, 1000, 1200, 1400];
    const spacing = (widthAvailable / yearsToShow.length);
    let currentX = 260;
    const xAxix = yearsToShow.map((d, i)=> {
                if (i === 0) {

                    currentX = currentX;
                    return currentX;
                }
                currentX = currentX + spacing;
                return currentX;
            }
    )
    yearsToShow.forEach((d, i)=> {

        svg2.append('text')
                .text(yearsToShow[i])
                .attr("x", xAxix[i])
                .attr("y", (y2.bandwidth() + 5) * data.length)
                .attr('fill', 'white')

    })


</script>
</div>

</body>
</html>